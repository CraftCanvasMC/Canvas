From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: PurpleWolfMC <jedimastertoothless@hotmail.com>
Date: Sun, 21 Jan 2024 12:37:44 -0800
Subject: [PATCH] Expose RAM Details to Server


diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index 981f0e8356cf8b814af37a5036e7e8418caf66a5..89d96472b9febc371b22c669ad5aa26eec228f8d 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -675,6 +675,7 @@ public final class CraftServer implements Server {
         return this.serverName;
     }
 
+    // Canvas start
     @Override
     public @NotNull Obfuscator getObfuscator() {
         return this.canvas_obfuscator;
@@ -690,6 +691,32 @@ public final class CraftServer implements Server {
         return this.console.getGui();
     }
 
+    public net.minecraft.server.gui.MinecraftServerGui getGuiHandle(){
+        return this.console.getGui();
+    }
+
+    public long getResourcesTotal(){
+        return this.getGuiHandle().getGuiStatsComponent().getRamDetails().getGraphData().getTotal();
+    }
+
+    public long getResourcesFree(){
+        return this.getGuiHandle().getGuiStatsComponent().getRamDetails().getGraphData().getFree();
+    }
+
+    public long getResourcesMax(){
+        return this.getGuiHandle().getGuiStatsComponent().getRamDetails().getGraphData().getMax();
+    }
+
+    public long getResourcesUsedMem(){
+        return this.getGuiHandle().getGuiStatsComponent().getRamDetails().getGraphData().getUsedMem();
+    }
+
+    public int getResourcesUsedPercent(){
+        return this.getGuiHandle().getGuiStatsComponent().getRamDetails().getGraphData().getUsedPercent();
+    }
+
+    // Canvas end
+
     @Override
     public String getVersion() {
         return this.serverVersion + " (MC: " + this.console.getServerVersion() + ")";
