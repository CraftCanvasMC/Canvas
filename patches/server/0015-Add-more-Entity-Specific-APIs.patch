From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: PurpleWolfMC <jedimastertoothless@hotmail.com>
Date: Sat, 21 Oct 2023 20:01:52 -0700
Subject: [PATCH] Add more Entity-Specific APIs


diff --git a/src/main/java/io/papermc/paper/entity/PaperSchoolableFish.java b/src/main/java/io/papermc/paper/entity/PaperSchoolableFish.java
index 41bf71d116ffc5431586ce54abba7f8def6c1dcf..e5afe1989a65870624e9408e52223201d7e841c3 100644
--- a/src/main/java/io/papermc/paper/entity/PaperSchoolableFish.java
+++ b/src/main/java/io/papermc/paper/entity/PaperSchoolableFish.java
@@ -49,4 +49,14 @@ public class PaperSchoolableFish extends CraftFish implements SchoolableFish {
 
         return (SchoolableFish) leader.getBukkitEntity();
     }
+
+    @Override
+    public void moveToLeader() {
+        this.getHandle().pathToLeader();
+    }
+
+    @Override
+    public boolean inRangeOfLeader() {
+        return this.getHandle().inRangeOfLeader();
+    }
 }
diff --git a/src/main/java/net/minecraft/world/entity/ambient/Bat.java b/src/main/java/net/minecraft/world/entity/ambient/Bat.java
index 1eab1393a2636c4a247f25dae317cea60cc7021c..fda1fabb5b832c1445a437b30ce35f1e00098937 100644
--- a/src/main/java/net/minecraft/world/entity/ambient/Bat.java
+++ b/src/main/java/net/minecraft/world/entity/ambient/Bat.java
@@ -35,7 +35,7 @@ import org.bukkit.craftbukkit.event.CraftEventFactory;
 public class Bat extends AmbientCreature {
 
     public static final float FLAP_DEGREES_PER_TICK = 74.48451F;
-    public static final int TICKS_PER_FLAP = Mth.ceil(2.4166098F);
+    public static int TICKS_PER_FLAP = Mth.ceil(2.4166098F);
     private static final EntityDataAccessor<Byte> DATA_ID_FLAGS = SynchedEntityData.defineId(Bat.class, EntityDataSerializers.BYTE);
     private static final int FLAG_RESTING = 1;
     private static final TargetingConditions BAT_RESTING_TARGETING = TargetingConditions.forNonCombat().range(4.0D);
@@ -50,6 +50,15 @@ public class Bat extends AmbientCreature {
         }
 
     }
+    // Canvas start
+    public void setTicksPerFlap(int tpf){
+        this.TICKS_PER_FLAP = tpf;
+    }
+
+    public int getTicksPerFlap(){
+        return TICKS_PER_FLAP;
+    }
+    // Canvas end
 
     // Purpur start
     @Override
diff --git a/src/main/java/net/minecraft/world/entity/animal/Cat.java b/src/main/java/net/minecraft/world/entity/animal/Cat.java
index 6e5b4a50b8d2dddbd7f099426b4866b35bcb798a..db3c824104b681b50621dfb6efe3bb4812f8e476 100644
--- a/src/main/java/net/minecraft/world/entity/animal/Cat.java
+++ b/src/main/java/net/minecraft/world/entity/animal/Cat.java
@@ -154,7 +154,7 @@ public class Cat extends TamableAnimal implements VariantHolder<CatVariant> {
         this.goalSelector.addGoal(1, new org.purpurmc.purpur.entity.ai.HasRider(this)); // Purpur
         this.goalSelector.addGoal(1, new PanicGoal(this, 1.5D));
         this.goalSelector.addGoal(2, new SitWhenOrderedToGoal(this));
-        this.goalSelector.addGoal(3, new Cat.CatRelaxOnOwnerGoal(this));
+        this.goalSelector.addGoal(3, new Cat.CatRelaxOnOwnerGoal(this, this.getAllowMorningGift()));
         this.goalSelector.addGoal(4, this.temptGoal);
         this.goalSelector.addGoal(5, new CatLieOnBedGoal(this, 1.1D, 8));
         this.goalSelector.addGoal(6, new FollowOwnerGoal(this, 1.0D, 10.0F, 5.0F, false));
@@ -525,6 +525,44 @@ public class Cat extends TamableAnimal implements VariantHolder<CatVariant> {
 
     }
 
+    // Canvas start
+    public boolean allowMorningGift = true;
+
+    public void setAllowMorningGift(boolean allow){
+        this.allowMorningGift = allow;
+    }
+
+    public boolean getAllowMorningGift(){
+        return allowMorningGift;
+    }
+
+    public void giveMorningGift() {
+        RandomSource randomsource = getRandom();
+        BlockPos.MutableBlockPos blockposition_mutableblockposition = new BlockPos.MutableBlockPos();
+
+        blockposition_mutableblockposition.set(isLeashed() ? getLeashHolder().blockPosition() : blockPosition());
+        randomTeleport((double) (blockposition_mutableblockposition.getX() + randomsource.nextInt(11) - 5), (double) (blockposition_mutableblockposition.getY() + randomsource.nextInt(5) - 2), (double) (blockposition_mutableblockposition.getZ() + randomsource.nextInt(11) - 5), false);
+        blockposition_mutableblockposition.set(blockPosition());
+        LootTable loottable = level().getServer().getLootData().getLootTable(BuiltInLootTables.CAT_MORNING_GIFT);
+        LootParams lootparams = (new LootParams.Builder((ServerLevel) level())).withParameter(LootContextParams.ORIGIN, position()).withParameter(LootContextParams.THIS_ENTITY, this).create(LootContextParamSets.GIFT);
+        List<ItemStack> list = loottable.getRandomItems(lootparams);
+        Iterator iterator = list.iterator();
+
+        while (iterator.hasNext()) {
+            ItemStack itemstack = (ItemStack) iterator.next();
+
+            ItemEntity entityitem = new ItemEntity(level(), (double) blockposition_mutableblockposition.getX() - (double) Mth.sin(yBodyRot * 0.017453292F), (double) blockposition_mutableblockposition.getY(), (double) blockposition_mutableblockposition.getZ() + (double) Mth.cos(yBodyRot * 0.017453292F), itemstack);
+            org.bukkit.event.entity.EntityDropItemEvent event = new org.bukkit.event.entity.EntityDropItemEvent(getBukkitEntity(), (org.bukkit.entity.Item) entityitem.getBukkitEntity());
+            entityitem.level().getCraftServer().getPluginManager().callEvent(event);
+            if (event.isCancelled()) {
+                continue;
+            }
+            level().addFreshEntity(entityitem);
+        }
+    }
+
+    // Canvas end
+
     @Override
     public boolean isSteppingCarefully() {
         return this.isCrouching() || super.isSteppingCarefully();
@@ -568,7 +606,7 @@ public class Cat extends TamableAnimal implements VariantHolder<CatVariant> {
         }
     }
 
-    private static class CatRelaxOnOwnerGoal extends Goal {
+    public class CatRelaxOnOwnerGoal extends Goal {
 
         private final Cat cat;
         @Nullable
@@ -576,9 +614,11 @@ public class Cat extends TamableAnimal implements VariantHolder<CatVariant> {
         @Nullable
         private BlockPos goalPos;
         private int onBedTicks;
+        public boolean allowGift;
 
-        public CatRelaxOnOwnerGoal(Cat cat) {
+        public CatRelaxOnOwnerGoal(Cat cat, boolean allowMorningGift) {
             this.cat = cat;
+            this.allowGift = allowMorningGift;
         }
 
         @Override
@@ -664,33 +704,37 @@ public class Cat extends TamableAnimal implements VariantHolder<CatVariant> {
             this.cat.getNavigation().stop();
         }
 
-        private void giveMorningGift() {
-            RandomSource randomsource = this.cat.getRandom();
-            BlockPos.MutableBlockPos blockposition_mutableblockposition = new BlockPos.MutableBlockPos();
-
-            blockposition_mutableblockposition.set(this.cat.isLeashed() ? this.cat.getLeashHolder().blockPosition() : this.cat.blockPosition());
-            this.cat.randomTeleport((double) (blockposition_mutableblockposition.getX() + randomsource.nextInt(11) - 5), (double) (blockposition_mutableblockposition.getY() + randomsource.nextInt(5) - 2), (double) (blockposition_mutableblockposition.getZ() + randomsource.nextInt(11) - 5), false);
-            blockposition_mutableblockposition.set(this.cat.blockPosition());
-            LootTable loottable = this.cat.level().getServer().getLootData().getLootTable(BuiltInLootTables.CAT_MORNING_GIFT);
-            LootParams lootparams = (new LootParams.Builder((ServerLevel) this.cat.level())).withParameter(LootContextParams.ORIGIN, this.cat.position()).withParameter(LootContextParams.THIS_ENTITY, this.cat).create(LootContextParamSets.GIFT);
-            List<ItemStack> list = loottable.getRandomItems(lootparams);
-            Iterator iterator = list.iterator();
-
-            while (iterator.hasNext()) {
-                ItemStack itemstack = (ItemStack) iterator.next();
-
-                // CraftBukkit start
-                ItemEntity entityitem = new ItemEntity(this.cat.level(), (double) blockposition_mutableblockposition.getX() - (double) Mth.sin(this.cat.yBodyRot * 0.017453292F), (double) blockposition_mutableblockposition.getY(), (double) blockposition_mutableblockposition.getZ() + (double) Mth.cos(this.cat.yBodyRot * 0.017453292F), itemstack);
-                org.bukkit.event.entity.EntityDropItemEvent event = new org.bukkit.event.entity.EntityDropItemEvent(this.cat.getBukkitEntity(), (org.bukkit.entity.Item) entityitem.getBukkitEntity());
-                entityitem.level().getCraftServer().getPluginManager().callEvent(event);
-                if (event.isCancelled()) {
-                    continue;
+        // Canvas start
+
+        public void giveMorningGift() {
+            if(allowGift){
+                RandomSource randomsource = this.cat.getRandom();
+                BlockPos.MutableBlockPos blockposition_mutableblockposition = new BlockPos.MutableBlockPos();
+
+                blockposition_mutableblockposition.set(this.cat.isLeashed() ? this.cat.getLeashHolder().blockPosition() : this.cat.blockPosition());
+                this.cat.randomTeleport((double) (blockposition_mutableblockposition.getX() + randomsource.nextInt(11) - 5), (double) (blockposition_mutableblockposition.getY() + randomsource.nextInt(5) - 2), (double) (blockposition_mutableblockposition.getZ() + randomsource.nextInt(11) - 5), false);
+                blockposition_mutableblockposition.set(this.cat.blockPosition());
+                LootTable loottable = this.cat.level().getServer().getLootData().getLootTable(BuiltInLootTables.CAT_MORNING_GIFT);
+                LootParams lootparams = (new LootParams.Builder((ServerLevel) this.cat.level())).withParameter(LootContextParams.ORIGIN, this.cat.position()).withParameter(LootContextParams.THIS_ENTITY, this.cat).create(LootContextParamSets.GIFT);
+                List<ItemStack> list = loottable.getRandomItems(lootparams);
+                Iterator iterator = list.iterator();
+
+                while (iterator.hasNext()) {
+                    ItemStack itemstack = (ItemStack) iterator.next();
+
+                    // CraftBukkit start
+                    ItemEntity entityitem = new ItemEntity(this.cat.level(), (double) blockposition_mutableblockposition.getX() - (double) Mth.sin(this.cat.yBodyRot * 0.017453292F), (double) blockposition_mutableblockposition.getY(), (double) blockposition_mutableblockposition.getZ() + (double) Mth.cos(this.cat.yBodyRot * 0.017453292F), itemstack);
+                    org.bukkit.event.entity.EntityDropItemEvent event = new org.bukkit.event.entity.EntityDropItemEvent(this.cat.getBukkitEntity(), (org.bukkit.entity.Item) entityitem.getBukkitEntity());
+                    entityitem.level().getCraftServer().getPluginManager().callEvent(event);
+                    if (event.isCancelled()) {
+                        continue;
+                    }
+                    this.cat.level().addFreshEntity(entityitem);
+                    // CraftBukkit end
                 }
-                this.cat.level().addFreshEntity(entityitem);
-                // CraftBukkit end
             }
-
         }
+        // Canvas end
 
         @Override
         public void tick() {
diff --git a/src/main/java/net/minecraft/world/entity/animal/allay/Allay.java b/src/main/java/net/minecraft/world/entity/animal/allay/Allay.java
index c783ce59ea766e6c46a3313628b961f27e01ee8b..468d3f8c550ae4fe37ea41276073e8d64867ff13 100644
--- a/src/main/java/net/minecraft/world/entity/animal/allay/Allay.java
+++ b/src/main/java/net/minecraft/world/entity/animal/allay/Allay.java
@@ -337,50 +337,63 @@ public class Allay extends PathfinderMob implements InventoryCarrier, VibrationS
         return this.getBrain().checkMemory(MemoryModuleType.ITEM_PICKUP_COOLDOWN_TICKS, MemoryStatus.VALUE_PRESENT);
     }
 
+    // Canvas start
+    public boolean canInteract = true;
+
+    public void setCanInteract(boolean canInteract){
+        this.canInteract = canInteract;
+    }
+
     @Override
     protected InteractionResult mobInteract(Player player, InteractionHand hand) {
-        ItemStack itemstack = player.getItemInHand(hand);
-        ItemStack itemstack1 = this.getItemInHand(InteractionHand.MAIN_HAND);
+        if(canInteract){
+            ItemStack itemstack = player.getItemInHand(hand);
+            ItemStack itemstack1 = this.getItemInHand(InteractionHand.MAIN_HAND);
+
+            if (this.isDancing() && this.isDuplicationItem(itemstack) && this.canDuplicate()) {
+                // CraftBukkit start - handle cancel duplication
+                Allay allay = this.duplicateAllay();
+                if (allay == null) {
+                    return InteractionResult.SUCCESS;
+                }
+                // CraftBukkit end
+                this.level().broadcastEntityEvent(this, (byte) 18);
+                this.level().playSound(player, (Entity) this, SoundEvents.AMETHYST_BLOCK_CHIME, SoundSource.NEUTRAL, 2.0F, 1.0F);
+                this.removeInteractionItem(player, itemstack);
+                return InteractionResult.SUCCESS;
+            } else if (itemstack1.isEmpty() && !itemstack.isEmpty()) {
+                ItemStack itemstack2 = itemstack.copyWithCount(1);
 
-        if (this.isDancing() && this.isDuplicationItem(itemstack) && this.canDuplicate()) {
-            // CraftBukkit start - handle cancel duplication
-            Allay allay = this.duplicateAllay();
-            if (allay == null) {
+                this.setItemInHand(InteractionHand.MAIN_HAND, itemstack2);
+                this.removeInteractionItem(player, itemstack);
+                this.level().playSound(player, (Entity) this, SoundEvents.ALLAY_ITEM_GIVEN, SoundSource.NEUTRAL, 2.0F, 1.0F);
+                this.getBrain().setMemory(MemoryModuleType.LIKED_PLAYER, player.getUUID()); // CraftBukkit - decompile error
                 return InteractionResult.SUCCESS;
-            }
-            // CraftBukkit end
-            this.level().broadcastEntityEvent(this, (byte) 18);
-            this.level().playSound(player, (Entity) this, SoundEvents.AMETHYST_BLOCK_CHIME, SoundSource.NEUTRAL, 2.0F, 1.0F);
-            this.removeInteractionItem(player, itemstack);
-            return InteractionResult.SUCCESS;
-        } else if (itemstack1.isEmpty() && !itemstack.isEmpty()) {
-            ItemStack itemstack2 = itemstack.copyWithCount(1);
-
-            this.setItemInHand(InteractionHand.MAIN_HAND, itemstack2);
-            this.removeInteractionItem(player, itemstack);
-            this.level().playSound(player, (Entity) this, SoundEvents.ALLAY_ITEM_GIVEN, SoundSource.NEUTRAL, 2.0F, 1.0F);
-            this.getBrain().setMemory(MemoryModuleType.LIKED_PLAYER, player.getUUID()); // CraftBukkit - decompile error
-            return InteractionResult.SUCCESS;
-        } else if (!itemstack1.isEmpty() && hand == InteractionHand.MAIN_HAND && itemstack.isEmpty()) {
-            this.setItemSlot(EquipmentSlot.MAINHAND, ItemStack.EMPTY);
-            this.level().playSound(player, (Entity) this, SoundEvents.ALLAY_ITEM_TAKEN, SoundSource.NEUTRAL, 2.0F, 1.0F);
-            this.swing(InteractionHand.MAIN_HAND);
-            Iterator iterator = this.getInventory().removeAllItems().iterator();
+            } else if (!itemstack1.isEmpty() && hand == InteractionHand.MAIN_HAND && itemstack.isEmpty()) {
+                this.setItemSlot(EquipmentSlot.MAINHAND, ItemStack.EMPTY);
+                this.level().playSound(player, (Entity) this, SoundEvents.ALLAY_ITEM_TAKEN, SoundSource.NEUTRAL, 2.0F, 1.0F);
+                this.swing(InteractionHand.MAIN_HAND);
+                Iterator iterator = this.getInventory().removeAllItems().iterator();
 
-            while (iterator.hasNext()) {
-                ItemStack itemstack3 = (ItemStack) iterator.next();
+                while (iterator.hasNext()) {
+                    ItemStack itemstack3 = (ItemStack) iterator.next();
 
-                BehaviorUtils.throwItem(this, itemstack3, this.position());
-            }
+                    BehaviorUtils.throwItem(this, itemstack3, this.position());
+                }
 
-            this.getBrain().eraseMemory(MemoryModuleType.LIKED_PLAYER);
-            player.addItem(itemstack1);
-            return InteractionResult.SUCCESS;
-        } else {
+                this.getBrain().eraseMemory(MemoryModuleType.LIKED_PLAYER);
+                player.addItem(itemstack1);
+                return InteractionResult.SUCCESS;
+            } else {
+                return super.mobInteract(player, hand);
+            }
+        }else{
             return super.mobInteract(player, hand);
         }
     }
 
+    // Canvas end
+
     public void setJukeboxPlaying(BlockPos jukeboxPos, boolean playing) {
         if (playing) {
             if (!this.isDancing()) {
diff --git a/src/main/java/net/minecraft/world/entity/animal/axolotl/Axolotl.java b/src/main/java/net/minecraft/world/entity/animal/axolotl/Axolotl.java
index 61cd0e050a2784f1d59ed3c9493e2386ef5fc3bb..b238e0067bfc62166be6fe8dbacc587a5fbb8346 100644
--- a/src/main/java/net/minecraft/world/entity/animal/axolotl/Axolotl.java
+++ b/src/main/java/net/minecraft/world/entity/animal/axolotl/Axolotl.java
@@ -29,6 +29,7 @@ import net.minecraft.world.DifficultyInstance;
 import net.minecraft.world.InteractionHand;
 import net.minecraft.world.InteractionResult;
 import net.minecraft.world.damagesource.DamageSource;
+import net.minecraft.world.effect.MobEffect;
 import net.minecraft.world.effect.MobEffectInstance;
 import net.minecraft.world.effect.MobEffects;
 import net.minecraft.world.entity.AgeableMob;
@@ -64,6 +65,12 @@ import net.minecraft.world.level.LevelReader;
 import net.minecraft.world.level.ServerLevelAccessor;
 import net.minecraft.world.level.pathfinder.BlockPathTypes;
 import net.minecraft.world.phys.Vec3;
+import org.bukkit.craftbukkit.CraftEffect;
+import org.bukkit.craftbukkit.potion.CraftPotionEffectType;
+import org.bukkit.craftbukkit.potion.CraftPotionUtil;
+import org.bukkit.craftbukkit.util.CraftMagicNumbers;
+import org.bukkit.potion.PotionEffect;
+import org.bukkit.potion.PotionEffectType;
 import org.joml.Vector3f;
 
 public class Axolotl extends Animal implements LerpingModel, VariantHolder<Axolotl.Variant>, Bucketable {
@@ -453,6 +460,36 @@ public class Axolotl extends Animal implements LerpingModel, VariantHolder<Axolo
 
     }
 
+    // Canvas start
+    private boolean applySupportingEffects = true;
+    private MobEffect supportingEffectType = MobEffects.REGENERATION;
+    private int amplifier = 1;
+
+    public boolean getApplySupportingEffects(){
+        return applySupportingEffects;
+    }
+
+    public void setApplySupportingEffects(boolean applySupportingEffects) {
+        this.applySupportingEffects = applySupportingEffects;
+    }
+
+    public void setSupportingEffectType(PotionEffectType potionEffectType){
+        MobEffect effect = CraftPotionEffectType.bukkitToMinecraft(potionEffectType);
+        this.supportingEffectType = effect;
+    }
+
+    public PotionEffectType getSupportingPotionEffectType(){
+        return CraftPotionEffectType.minecraftToBukkit(supportingEffectType);
+    }
+
+    public void setSupportingEffectAmplifier(int amplifier){
+        this.amplifier = amplifier;
+    }
+
+    public int getSupportingEffectAmplifier(){
+        return this.amplifier;
+    }
+
     public void applySupportingEffects(Player player) {
         MobEffectInstance mobeffect = player.getEffect(MobEffects.REGENERATION);
 
@@ -460,12 +497,14 @@ public class Axolotl extends Animal implements LerpingModel, VariantHolder<Axolo
             int i = mobeffect != null ? mobeffect.getDuration() : 0;
             int j = Math.min(2400, 100 + i);
 
-            player.addEffect(new MobEffectInstance(MobEffects.REGENERATION, j, 0), this, org.bukkit.event.entity.EntityPotionEffectEvent.Cause.AXOLOTL); // CraftBukkit
+            player.addEffect(new MobEffectInstance(supportingEffectType, j, amplifier), this, org.bukkit.event.entity.EntityPotionEffectEvent.Cause.AXOLOTL); // CraftBukkit
         }
 
         player.removeEffect(MobEffects.DIG_SLOWDOWN, org.bukkit.event.entity.EntityPotionEffectEvent.Cause.AXOLOTL); // Paper
     }
 
+    // Canvas end
+
     @Override
     public boolean requiresCustomPersistence() {
         return super.requiresCustomPersistence() || this.fromBucket();
diff --git a/src/main/java/net/minecraft/world/entity/animal/camel/Camel.java b/src/main/java/net/minecraft/world/entity/animal/camel/Camel.java
index 1d84135c709a90843b1ee34fb47508e78a7ce95d..a611286c556092ca34b0274cca527b168f686ee9 100644
--- a/src/main/java/net/minecraft/world/entity/animal/camel/Camel.java
+++ b/src/main/java/net/minecraft/world/entity/animal/camel/Camel.java
@@ -54,7 +54,7 @@ import org.joml.Vector3f;
 
 public class Camel extends AbstractHorse implements PlayerRideableJumping, Saddleable {
     public static final Ingredient TEMPTATION_ITEM = Ingredient.of(Items.CACTUS);
-    public static final float BABY_SCALE = 0.45F;
+    public static float BABY_SCALE = 0.45F;
     public static final int DASH_COOLDOWN_TICKS = 55;
     public static final int MAX_HEAD_Y_ROT = 30;
     private static final float RUNNING_SPEED_BONUS = 0.1F;
@@ -497,11 +497,17 @@ public class Camel extends AbstractHorse implements PlayerRideableJumping, Saddl
         return new Vector3f(0.0F, g, f * scaleFactor);
     }
 
+    // Canvas start
+
+    private float GROWN_SCALE = 1.0f;
+
     @Override
     public float getScale() {
-        return this.isBaby() ? 0.45F : 1.0F;
+        return this.isBaby() ? BABY_SCALE : GROWN_SCALE;
     }
 
+    // Canvas end
+
     private double getBodyAnchorAnimationYOffset(boolean primaryPassenger, float tickDelta, EntityDimensions dimensions, float scaleFactor) {
         double d = (double)(dimensions.height - 0.375F * scaleFactor);
         float f = scaleFactor * 1.43F;
diff --git a/src/main/java/net/minecraft/world/entity/boss/enderdragon/EnderDragon.java b/src/main/java/net/minecraft/world/entity/boss/enderdragon/EnderDragon.java
index 823f0e36119079eb827767c08391f18d75b66610..2dda611f1e4fc3f69f7ee336504ed7fa17590bc6 100644
--- a/src/main/java/net/minecraft/world/entity/boss/enderdragon/EnderDragon.java
+++ b/src/main/java/net/minecraft/world/entity/boss/enderdragon/EnderDragon.java
@@ -79,8 +79,8 @@ public class EnderDragon extends Mob implements Enemy {
     public int posPointer = -1;
     public final EnderDragonPart[] subEntities;
     public final EnderDragonPart head;
-    private final EnderDragonPart neck;
-    private final EnderDragonPart body;
+    public final EnderDragonPart neck; // Canvas
+    public final EnderDragonPart body; // Canvas
     private final EnderDragonPart tail1;
     private final EnderDragonPart tail2;
     private final EnderDragonPart tail3;
@@ -548,7 +548,7 @@ public class EnderDragon extends Mob implements Enemy {
 
     }
 
-    private void knockBack(List<Entity> entities) {
+    public void knockBack(List<Entity> entities) {
         double d0 = (this.body.getBoundingBox().minX + this.body.getBoundingBox().maxX) / 2.0D;
         double d1 = (this.body.getBoundingBox().minZ + this.body.getBoundingBox().maxZ) / 2.0D;
         Iterator iterator = entities.iterator();
@@ -589,7 +589,7 @@ public class EnderDragon extends Mob implements Enemy {
         return (float) Mth.wrapDegrees(yawDegrees);
     }
 
-    private boolean checkWalls(AABB box) {
+    public boolean checkWalls(AABB box) {
         int i = Mth.floor(box.minX);
         int j = Mth.floor(box.minY);
         int k = Mth.floor(box.minZ);
diff --git a/src/main/java/net/minecraft/world/entity/monster/Blaze.java b/src/main/java/net/minecraft/world/entity/monster/Blaze.java
index a8b58469fd8a1ed4ec0ce443cf05557903527bd7..8636a7fe9032e8400ef473a5fb9b40feb3dbb6a4 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Blaze.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Blaze.java
@@ -186,7 +186,7 @@ public class Blaze extends Monster {
         return (this.entityData.get(DATA_FLAGS_ID) & 1) != 0;
     }
 
-    void setCharged(boolean fireActive) {
+    public void setCharged(boolean fireActive) { // Canvas
         byte b = this.entityData.get(DATA_FLAGS_ID);
         if (fireActive) {
             b = (byte)(b | 1);
diff --git a/src/main/java/net/minecraft/world/entity/monster/Drowned.java b/src/main/java/net/minecraft/world/entity/monster/Drowned.java
index 63a1cf5604c14025171d7be7434e2d6b64c98107..1bc451f4e3dba038be39c753ecbc72468eca0039 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Drowned.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Drowned.java
@@ -56,7 +56,7 @@ import net.minecraft.world.phys.Vec3;
 public class Drowned extends Zombie implements RangedAttackMob {
 
     public static final float NAUTILUS_SHELL_CHANCE = 0.03F;
-    boolean searchingForLand;
+    public boolean searchingForLand;
     public final WaterBoundPathNavigation waterNavigation;
     public final GroundPathNavigation groundNavigation;
 
diff --git a/src/main/java/net/minecraft/world/entity/monster/ElderGuardian.java b/src/main/java/net/minecraft/world/entity/monster/ElderGuardian.java
index df8d1b34078031001c50325b8cf5bfa9a5c361fd..4377f54d1e110268a34d4d2a2380245402ac3b3a 100644
--- a/src/main/java/net/minecraft/world/entity/monster/ElderGuardian.java
+++ b/src/main/java/net/minecraft/world/entity/monster/ElderGuardian.java
@@ -20,12 +20,55 @@ import org.joml.Vector3f;
 
 public class ElderGuardian extends Guardian {
 
-    public static final float ELDER_SIZE_SCALE = EntityType.ELDER_GUARDIAN.getWidth() / EntityType.GUARDIAN.getWidth();
-    private static final int EFFECT_INTERVAL = 1200;
-    private static final int EFFECT_RADIUS = 50;
-    private static final int EFFECT_DURATION = 6000;
-    private static final int EFFECT_AMPLIFIER = 2;
-    private static final int EFFECT_DISPLAY_LIMIT = 1200;
+    // Canvas start
+    public static float ELDER_SIZE_SCALE = EntityType.ELDER_GUARDIAN.getWidth() / EntityType.GUARDIAN.getWidth();
+    private static int EFFECT_INTERVAL = 1200;
+    private static int EFFECT_RADIUS = 50;
+    private static int EFFECT_DURATION = 6000;
+    private static int EFFECT_AMPLIFIER = 2;
+    private static int EFFECT_DISPLAY_LIMIT = 1200;
+
+    public void setEffectAmplifier(final int effectAmplifier) {
+        EFFECT_AMPLIFIER = effectAmplifier;
+    }
+
+    public int getEffectDuration() {
+        return EFFECT_DURATION;
+    }
+
+    public void setEffectDuration(final int effectDuration) {
+        EFFECT_DURATION = effectDuration;
+    }
+
+    public int getEffectAmplifier() {
+        return EFFECT_AMPLIFIER;
+    }
+
+    public int getEffectDisplayLimit() {
+        return EFFECT_DISPLAY_LIMIT;
+    }
+
+    public void setEffectDisplayLimit(final int effectDisplayLimit) {
+        EFFECT_DISPLAY_LIMIT = effectDisplayLimit;
+    }
+
+    public int getEffectInterval() {
+        return EFFECT_INTERVAL;
+    }
+
+    public void setEffectInterval(final int effectInterval) {
+        EFFECT_INTERVAL = effectInterval;
+    }
+
+    public int getEffectRadius() {
+        return EFFECT_RADIUS;
+    }
+
+    public void setEffectRadius(final int effectRadius) {
+        EFFECT_RADIUS = effectRadius;
+    }
+
+    // Canvas end
 
     public ElderGuardian(EntityType<? extends ElderGuardian> type, Level world) {
         super(type, world);
diff --git a/src/main/java/net/minecraft/world/entity/monster/EnderMan.java b/src/main/java/net/minecraft/world/entity/monster/EnderMan.java
index 0be47e96b2bb6bb66e7905e255e5f6009d6e0a97..b99ce8350b7bb4566ef1511a35c685ccc097dd13 100644
--- a/src/main/java/net/minecraft/world/entity/monster/EnderMan.java
+++ b/src/main/java/net/minecraft/world/entity/monster/EnderMan.java
@@ -87,7 +87,7 @@ public class EnderMan extends Monster implements NeutralMob {
     private static final EntityDataAccessor<Boolean> DATA_STARED_AT = SynchedEntityData.defineId(EnderMan.class, EntityDataSerializers.BOOLEAN);
     private int lastStareSound = Integer.MIN_VALUE;
     private int targetChangeTime;
-    private static final UniformInt PERSISTENT_ANGER_TIME = TimeUtil.rangeOfSeconds(20, 39);
+    public UniformInt PERSISTENT_ANGER_TIME; // Canvas
     private int remainingPersistentAngerTime;
     @Nullable
     private UUID persistentAngerTarget;
@@ -96,8 +96,19 @@ public class EnderMan extends Monster implements NeutralMob {
         super(type, world);
         this.setMaxUpStep(1.0F);
         if (isSensitiveToWater()) this.setPathfindingMalus(BlockPathTypes.WATER, -1.0F); // Purpur
+        PERSISTENT_ANGER_TIME = TimeUtil.rangeOfSeconds(minRangeAnger, maxRangeAnger);
     }
 
+    // Canvas start
+    public int minRangeAnger = 20;
+    public int maxRangeAnger = 39;
+    public void setPersistentAngerTime(int min, int max){
+        this.PERSISTENT_ANGER_TIME = TimeUtil.rangeOfSeconds(min, max);
+        this.maxRangeAnger = max;
+        this.minRangeAnger = min;
+    }
+    // Canvas end
+
     // Purpur start
     @Override
     public boolean isRidable() {
@@ -194,7 +205,7 @@ public class EnderMan extends Monster implements NeutralMob {
 
     @Override
     public void startPersistentAngerTimer() {
-        this.setRemainingPersistentAngerTime(EnderMan.PERSISTENT_ANGER_TIME.sample(this.random));
+        this.setRemainingPersistentAngerTime(this.PERSISTENT_ANGER_TIME.sample(this.random)); // Canvas
     }
 
     @Override
@@ -272,7 +283,7 @@ public class EnderMan extends Monster implements NeutralMob {
         event.setCancelled(!shouldAttack);
         return event.callEvent();
     }
-    private boolean isLookingAtMe_check(Player player) {
+    public boolean isLookingAtMe_check(Player player) {
         // Paper end
         ItemStack itemstack = (ItemStack) player.getInventory().armor.get(3);
 
@@ -359,7 +370,7 @@ public class EnderMan extends Monster implements NeutralMob {
         return this.teleport(d1, d2, d3);
     }
 
-    private boolean teleport(double x, double y, double z) {
+    public boolean teleport(double x, double y, double z) { // Canvas
         BlockPos.MutableBlockPos blockposition_mutableblockposition = new BlockPos.MutableBlockPos(x, y, z);
 
         // Pufferfish start - single chunk lookup
diff --git a/src/main/java/net/minecraft/world/entity/projectile/AbstractHurtingProjectile.java b/src/main/java/net/minecraft/world/entity/projectile/AbstractHurtingProjectile.java
index 6c9a8f062f989db022154155e8a05b334a0510da..326a58ecf85f70ddd1b223352811beb827ca9aad 100644
--- a/src/main/java/net/minecraft/world/entity/projectile/AbstractHurtingProjectile.java
+++ b/src/main/java/net/minecraft/world/entity/projectile/AbstractHurtingProjectile.java
@@ -1,6 +1,7 @@
 package net.minecraft.world.entity.projectile;
 
 import net.minecraft.core.particles.ParticleOptions;
+import net.minecraft.core.particles.ParticleType;
 import net.minecraft.core.particles.ParticleTypes;
 import net.minecraft.nbt.CompoundTag;
 import net.minecraft.nbt.ListTag;
@@ -123,17 +124,35 @@ public abstract class AbstractHurtingProjectile extends Projectile {
         return super.canHitEntity(entity) && !entity.noPhysics;
     }
 
-    protected boolean shouldBurn() {
-        return true;
+    // Canvas start
+    private boolean shouldBurn = true;
+    private ParticleOptions trailType = ParticleTypes.SMOKE;
+    private float inertia = 0.95f;
+
+    public boolean shouldBurn() {
+        return shouldBurn;
+    }
+
+    public ParticleOptions getTrailParticle() {
+        return trailType;
+    }
+
+    public float getInertia() {
+        return inertia;
+    }
+
+    public void setShouldBurn(boolean burn) {
+        this.shouldBurn = burn;
     }
 
-    protected ParticleOptions getTrailParticle() {
-        return ParticleTypes.SMOKE;
+    public void setTrailParticle(ParticleOptions trailType) {
+        this.trailType = trailType;
     }
 
-    protected float getInertia() {
-        return 0.95F;
+    public void setInertia(float inertia) {
+        this.inertia = inertia;
     }
+    // Canvas end
 
     @Override
     public void addAdditionalSaveData(CompoundTag nbt) {
diff --git a/src/main/java/net/minecraft/world/entity/vehicle/Boat.java b/src/main/java/net/minecraft/world/entity/vehicle/Boat.java
index c314febb75a85ef12051bde392c5b57e9c5d85ac..cfdd14e0f272371ae8e824cf228ec7bdcec67ec6 100644
--- a/src/main/java/net/minecraft/world/entity/vehicle/Boat.java
+++ b/src/main/java/net/minecraft/world/entity/vehicle/Boat.java
@@ -2,8 +2,10 @@ package net.minecraft.world.entity.vehicle;
 
 import com.google.common.collect.Lists;
 import com.google.common.collect.UnmodifiableIterator;
+import java.util.HashMap;
 import java.util.Iterator;
 import java.util.List;
+import java.util.Map;
 import java.util.function.IntFunction;
 import javax.annotation.Nullable;
 import net.minecraft.BlockUtil;
@@ -241,16 +243,31 @@ public class Boat extends Entity implements VariantHolder<Boat.Type> {
         }
     }
 
-    protected void destroy(DamageSource source) {
-        // Purpur start
-        final ItemStack boat = new ItemStack(this.getDropItem());
-        if (this.level().purpurConfig.persistentDroppableEntityDisplayNames && this.hasCustomName()) {
-            boat.setHoverName(this.getCustomName());
+    // Canvas start
+    private boolean canDestroy = true;
+
+    public boolean canDestroy() {
+        return canDestroy;
+    }
+
+    public void setCanDestroy(final boolean canDestroy) {
+        this.canDestroy = canDestroy;
+    }
+
+    public void destroy(DamageSource source) {
+        if(canDestroy){
+            // Purpur start
+            final ItemStack boat = new ItemStack(this.getDropItem());
+            if (this.level().purpurConfig.persistentDroppableEntityDisplayNames && this.hasCustomName()) {
+                boat.setHoverName(this.getCustomName());
+            }
+            this.spawnAtLocation(boat);
+            // Purpur end
         }
-        this.spawnAtLocation(boat);
-        // Purpur end
     }
 
+    // Canvas end
+
     @Override
     public void onAboveBubbleCol(boolean drag) {
         if (!this.level().isClientSide) {
@@ -302,41 +319,63 @@ public class Boat extends Entity implements VariantHolder<Boat.Type> {
 
     }
 
+    // Canvas start
     public Item getDropItem() {
         Item item;
 
         switch (this.getVariant()) {
             case SPRUCE:
-                item = Items.SPRUCE_BOAT;
+                item = boatDropMap.get(Type.SPRUCE);
                 break;
             case BIRCH:
-                item = Items.BIRCH_BOAT;
+                item = boatDropMap.get(Type.BIRCH);
                 break;
             case JUNGLE:
-                item = Items.JUNGLE_BOAT;
+                item = boatDropMap.get(Type.JUNGLE);
                 break;
             case ACACIA:
-                item = Items.ACACIA_BOAT;
+                item = boatDropMap.get(Type.ACACIA);
                 break;
             case CHERRY:
-                item = Items.CHERRY_BOAT;
+                item = boatDropMap.get(Type.CHERRY);
                 break;
             case DARK_OAK:
-                item = Items.DARK_OAK_BOAT;
+                item = boatDropMap.get(Type.DARK_OAK);
                 break;
             case MANGROVE:
-                item = Items.MANGROVE_BOAT;
+                item = boatDropMap.get(Type.MANGROVE);
                 break;
             case BAMBOO:
-                item = Items.BAMBOO_RAFT;
+                item = boatDropMap.get(Type.BAMBOO);
                 break;
             default:
-                item = Items.OAK_BOAT;
+                item = boatDropMap.get(Type.OAK);
         }
 
         return item;
     }
 
+    public static Map<Type, Item> boatDropMap = new HashMap<>();
+
+    public static void setupBoatDropMap(){
+        boatDropMap.clear();
+        boatDropMap.put(Type.SPRUCE, Items.SPRUCE_BOAT);
+        boatDropMap.put(Type.BIRCH, Items.BIRCH_BOAT);
+        boatDropMap.put(Type.JUNGLE, Items.JUNGLE_BOAT);
+        boatDropMap.put(Type.ACACIA, Items.ACACIA_BOAT);
+        boatDropMap.put(Type.CHERRY, Items.CHERRY_BOAT);
+        boatDropMap.put(Type.DARK_OAK, Items.DARK_OAK_BOAT);
+        boatDropMap.put(Type.MANGROVE, Items.MANGROVE_BOAT);
+        boatDropMap.put(Type.BAMBOO, Items.BAMBOO_RAFT);
+        boatDropMap.put(Type.OAK, Items.OAK_BOAT);
+    }
+
+    public Map<Type, Item> getBoatDropMap(){
+        return boatDropMap;
+    }
+
+    // Canvas end
+
     @Override
     public void animateHurt(float yaw) {
         this.setHurtDir(-this.getHurtDir());
diff --git a/src/main/java/net/minecraft/world/entity/vehicle/ChestBoat.java b/src/main/java/net/minecraft/world/entity/vehicle/ChestBoat.java
index e88c39d405fc7068db64ad34a03dec8d559e749e..9e062da2ef7f7a79662354ac4dd7bea1d102143d 100644
--- a/src/main/java/net/minecraft/world/entity/vehicle/ChestBoat.java
+++ b/src/main/java/net/minecraft/world/entity/vehicle/ChestBoat.java
@@ -76,12 +76,16 @@ public class ChestBoat extends Boat implements HasCustomInventoryScreen, Contain
         this.readChestVehicleSaveData(nbt);
     }
 
+    /* -- Canvas start
+
     @Override
     public void destroy(DamageSource source) {
         super.destroy(source);
         this.chestVehicleDestroyed(source, this.level(), this);
     }
 
+    Canvas end -- */
+
     @Override
     public void remove(Entity.RemovalReason reason) {
         if (!this.level().isClientSide && reason.shouldDestroy()) {
@@ -117,6 +121,8 @@ public class ChestBoat extends Boat implements HasCustomInventoryScreen, Contain
 
     }
 
+    /* -- Canvas start
+
     @Override
     public Item getDropItem() {
         Item item;
@@ -153,6 +159,8 @@ public class ChestBoat extends Boat implements HasCustomInventoryScreen, Contain
         return item;
     }
 
+     Canvas end -- */
+
     @Override
     public void clearContent() {
         this.clearChestVehicleContent();
diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index 5135cad58362ee7662ccd9e67bcce51689accc4c..b8b8b093dd4cb9a3d6a51d5319b87a16a0f536db 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -91,6 +91,7 @@ import net.minecraft.world.entity.EntityType;
 import net.minecraft.world.entity.ai.village.VillageSiege;
 import net.minecraft.world.entity.npc.CatSpawner;
 import net.minecraft.world.entity.npc.WanderingTraderSpawner;
+import net.minecraft.world.entity.vehicle.Boat;
 import net.minecraft.world.inventory.AbstractContainerMenu;
 import net.minecraft.world.inventory.CraftingContainer;
 import net.minecraft.world.inventory.CraftingMenu;
@@ -194,6 +195,7 @@ import org.bukkit.craftbukkit.packs.CraftDataPackManager;
 import org.bukkit.craftbukkit.potion.CraftPotionBrewer;
 import org.bukkit.craftbukkit.profile.CraftPlayerProfile;
 import org.bukkit.craftbukkit.scheduler.CraftScheduler;
+import org.bukkit.craftbukkit.scheduler.MinecraftInternalPlugin;
 import org.bukkit.craftbukkit.scoreboard.CraftCriteria;
 import org.bukkit.craftbukkit.scoreboard.CraftScoreboardManager;
 import org.bukkit.craftbukkit.structure.CraftStructureManager;
@@ -498,6 +500,8 @@ public final class CraftServer implements Server {
             MapPalette.setMapColorCache(new CraftMapColorCache(this.logger));
         }
         datapackManager = new io.papermc.paper.datapack.PaperDatapackManager(console.getPackRepository()); // Paper
+        Boat.setupBoatDropMap(); // Canvas - setup drop mappings
+        Bukkit.getPluginManager().registerEvents(new MinecraftInternalPlugin(), new MinecraftInternalPlugin()); // Canvas - register as listener
     }
 
     public boolean getCommandBlockOverride(String command) {
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftAllay.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftAllay.java
index dc19a0ad99deed9cc71c243322e375b740db7a9b..f857031c07b015053893367c0c140da097c3e4cd 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftAllay.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftAllay.java
@@ -91,4 +91,17 @@ public class CraftAllay extends CraftCreature implements org.bukkit.entity.Allay
         BlockPos nmsJukeboxPos = this.getHandle().jukeboxPos;
         return (nmsJukeboxPos != null) ? CraftLocation.toBukkit(nmsJukeboxPos, getWorld()) : null;
     }
+
+    // Canvas start
+    @Override
+    public boolean canInteractWith() {
+        return this.getHandle().canInteract;
+    }
+
+    @Override
+    public void setCanInteractWith(final boolean canInteractWith) {
+        this.getHandle().setCanInteract(canInteractWith);
+    }
+    // Canvas end
+
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftAxolotl.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftAxolotl.java
index cbfca242f820d238b112f8ce64e9de8398c48a1c..da003ffbe485a55bb307eecdb8d10ad8cc04de22 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftAxolotl.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftAxolotl.java
@@ -3,6 +3,7 @@ package org.bukkit.craftbukkit.entity;
 import com.google.common.base.Preconditions;
 import org.bukkit.craftbukkit.CraftServer;
 import org.bukkit.entity.Axolotl;
+import org.bukkit.potion.PotionEffectType;
 
 public class CraftAxolotl extends CraftAnimals implements Axolotl, io.papermc.paper.entity.PaperBucketable { // Paper - Bucketable API
 
@@ -41,4 +42,39 @@ public class CraftAxolotl extends CraftAnimals implements Axolotl, io.papermc.pa
 
         this.getHandle().setVariant(net.minecraft.world.entity.animal.axolotl.Axolotl.Variant.byId(variant.ordinal()));
     }
+
+    // Canvas start
+
+    @Override
+    public boolean getApplySupportingEffects() {
+        return this.getHandle().getApplySupportingEffects();
+    }
+
+    @Override
+    public void setApplySupportingEffects(final boolean applySupportingEffects) {
+        this.getHandle().setApplySupportingEffects(applySupportingEffects);
+    }
+
+    @Override
+    public void setSupportingEffectType(final PotionEffectType potionEffectType) {
+        this.getHandle().setSupportingEffectType(potionEffectType);
+    }
+
+    @Override
+    public PotionEffectType getSupportingPotionEffectType() {
+        return this.getHandle().getSupportingPotionEffectType();
+    }
+
+    @Override
+    public void setSupportingEffectAmplifier(final int amplifier) {
+        this.getHandle().setSupportingEffectAmplifier(amplifier);
+    }
+
+    @Override
+    public int getSupportingEffectAmplifier() {
+        return this.getHandle().getSupportingEffectAmplifier();
+    }
+
+    // Canvas end
+
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftBat.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftBat.java
index 7592ecac3d0893974d9d22ce40c50f1008ab9695..dacd58dfb881099685d48e15111562d6d4e564e7 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftBat.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftBat.java
@@ -47,5 +47,15 @@ public class CraftBat extends CraftAmbient implements Bat {
 
         this.getHandle().targetPosition = pos;
     }
+
+    @Override
+    public void setTicksPerFlap(final int tpf) {
+        this.getHandle().setTicksPerFlap(tpf);
+    }
+
+    @Override
+    public int getTicksPerFlap() {
+        return this.getHandle().getTicksPerFlap();
+    }
     // Paper end
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftBlaze.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftBlaze.java
index 6be071da0637a97123c5100c4e7a2af2c5e83d7e..2e3e63a867b6d8d9881ebbc8268caafb3bcaa3bb 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftBlaze.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftBlaze.java
@@ -17,4 +17,16 @@ public class CraftBlaze extends CraftMonster implements Blaze {
     public String toString() {
         return "CraftBlaze";
     }
+
+    // Canvas start
+    @Override
+    public boolean isOnFire() {
+        return this.getHandle().isOnFire();
+    }
+
+    @Override
+    public void setCharged(final boolean fireActive) {
+        this.getHandle().setCharged(fireActive);
+    }
+    // Canvas end
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftBoat.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftBoat.java
index 338e5ec5a518f9542e82ad43efeaa2a8cf04af42..dbb2e6a0b43ae41a0890bdc93db19161f565edb5 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftBoat.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftBoat.java
@@ -2,8 +2,17 @@ package org.bukkit.craftbukkit.entity;
 
 import com.google.common.base.Preconditions;
 import java.util.stream.Collectors;
+import net.minecraft.world.damagesource.DamageSource;
+import net.minecraft.world.damagesource.DamageSources;
+import net.minecraft.world.damagesource.DamageType;
+import net.minecraft.world.damagesource.DamageTypes;
+import net.minecraft.world.item.Item;
+import net.minecraft.world.item.Items;
+import org.bukkit.Bukkit;
+import org.bukkit.Material;
 import org.bukkit.TreeSpecies;
 import org.bukkit.craftbukkit.CraftServer;
+import org.bukkit.craftbukkit.util.CraftMagicNumbers;
 import org.bukkit.entity.Boat;
 import org.bukkit.entity.Entity;
 
@@ -84,6 +93,86 @@ public class CraftBoat extends CraftVehicle implements Boat {
     public org.bukkit.Material getBoatMaterial() {
         return org.bukkit.craftbukkit.util.CraftMagicNumbers.getMaterial(this.getHandle().getDropItem());
     }
+
+    // Canvas start
+    @Override
+    public void shouldDropItemOnDestroy(final boolean shouldDrop) {
+        this.getHandle().setCanDestroy(shouldDrop);
+    }
+
+    @Override
+    public boolean getShouldDropItemOnDestroy() {
+        return this.getHandle().canDestroy();
+    }
+
+    @Override
+    public void destroy() {
+        this.getHandle().destroy(this.getHandle().getCommandSenderWorld().damageSources().generic());
+    }
+
+    @Override
+    public void setDropItem(final Boat.Type boatType, final Material itemMaterial) {
+        Item item = Items.AIR;
+        switch (boatType) {
+            case SPRUCE -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.SPRUCE);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.SPRUCE, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+            case BIRCH -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.BIRCH);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.BIRCH, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+            case JUNGLE -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.JUNGLE);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.JUNGLE, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+            case ACACIA -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.ACACIA);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.ACACIA, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+            case CHERRY -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.CHERRY);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.CHERRY, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+            case DARK_OAK -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.DARK_OAK);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.DARK_OAK, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+            case MANGROVE -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.MANGROVE);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.MANGROVE, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+            case BAMBOO -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.BAMBOO);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.BAMBOO, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+            case OAK -> {
+                this.getHandle().getBoatDropMap().remove(net.minecraft.world.entity.vehicle.Boat.Type.OAK);
+                item = this.getHandle().getBoatDropMap().put(net.minecraft.world.entity.vehicle.Boat.Type.OAK, CraftMagicNumbers.getItem(itemMaterial));
+                break;
+            }
+        }
+    }
+
+    @Override
+    public Material getDropItem(final Boat.Type boatMaterial) {
+        return CraftMagicNumbers.getMaterial(this.getHandle().getBoatDropMap().get(boatMaterial));
+    }
+
+    @Override
+    public void resetDropMap() {
+        net.minecraft.world.entity.vehicle.Boat.setupBoatDropMap();
+    }
+    // Canvas end
+
     // Paper end
 
     @Override
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftCamel.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftCamel.java
index 80e571c977db5cdf43bfbfce035f37a3fa325c95..69c8a50d6daf8763a0bce84ac0d6dc8911b4fd5b 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftCamel.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftCamel.java
@@ -5,6 +5,8 @@ import org.bukkit.craftbukkit.CraftServer;
 import org.bukkit.entity.Camel;
 import org.bukkit.entity.Horse;
 
+import static net.minecraft.world.entity.animal.camel.Camel.BABY_SCALE;
+
 public class CraftCamel extends CraftAbstractHorse implements Camel {
 
     public CraftCamel(CraftServer server, net.minecraft.world.entity.animal.camel.Camel entity) {
@@ -49,4 +51,5 @@ public class CraftCamel extends CraftAbstractHorse implements Camel {
             this.getHandle().standUp();
         }
     }
+
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftCat.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftCat.java
index 6c9531c018be29b5794d047b50007fde1b50b494..cea78de9713d5be1df3a6abdd167cd51093501f4 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftCat.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftCat.java
@@ -85,5 +85,31 @@ public class CraftCat extends CraftTameableAnimal implements Cat {
     public boolean isHeadUp() {
         return this.getHandle().isRelaxStateOne();
     }
-    // Paper End - More cat api
+
+    // Canvas start
+    @Override
+    public void hiss() {
+        this.getHandle().hiss();
+    }
+
+    @Override
+    public boolean isSteppingCarefully() {
+        return this.getHandle().isSteppingCarefully();
+    }
+
+    @Override
+    public boolean allowMorningGiftSpawn() {
+        return this.getHandle().allowMorningGift;
+    }
+
+    @Override
+    public void setAllowMorningGiftSpawn(final boolean allow) {
+        this.getHandle().setAllowMorningGift(allow);
+    }
+
+    @Override
+    public void spawnMorningGift() {
+        this.getHandle().giveMorningGift();
+    }
+    // Paper End - More cat api -&- Canvas end
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftChestBoat.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftChestBoat.java
index c332e8504b96a4437325b5a64430c97c5afb6b4b..41dcdd4468046f97855e22fd066836d00555ca4a 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftChestBoat.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftChestBoat.java
@@ -1,5 +1,6 @@
 package org.bukkit.craftbukkit.entity;
 
+import com.destroystokyo.paper.entity.CraftRangedEntity;
 import net.minecraft.resources.ResourceLocation;
 import net.minecraft.world.entity.vehicle.ChestBoat;
 import org.bukkit.Bukkit;
@@ -7,9 +8,12 @@ import org.bukkit.NamespacedKey;
 import org.bukkit.craftbukkit.CraftServer;
 import org.bukkit.craftbukkit.inventory.CraftInventory;
 import org.bukkit.craftbukkit.util.CraftNamespacedKey;
+import org.bukkit.entity.Player;
 import org.bukkit.inventory.Inventory;
 import org.bukkit.loot.LootTable;
 
+import static org.bukkit.craftbukkit.entity.CraftEntityType.bukkitToMinecraft;
+
 public class CraftChestBoat extends CraftBoat implements org.bukkit.entity.ChestBoat, com.destroystokyo.paper.loottable.PaperLootableEntityInventory { // Paper
     private final Inventory inventory;
 
@@ -64,4 +68,11 @@ public class CraftChestBoat extends CraftBoat implements org.bukkit.entity.Chest
         this.getHandle().setLootTable(newKey);
         this.getHandle().setLootTableSeed(seed);
     }
+
+    // Canvas start
+    @Override
+    public void openChestInventory(final Player player) {
+        this.getHandle().openCustomInventoryScreen(((CraftPlayer) player).getHandle());
+    }
+    // Canvas end
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftChicken.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftChicken.java
index 5e0b611db52452c00bf3cd2fc07dd713f238a581..dd806ba07308c9f8afc4f307e062b2a038ec99a4 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftChicken.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftChicken.java
@@ -40,4 +40,9 @@ public class CraftChicken extends CraftAnimals implements Chicken {
         this.getHandle().eggTime = eggLayTime;
     }
     // Paper end
+
+    @Override
+    public boolean isFlapping(){
+        return this.isFlapping();
+    }
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftCreature.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftCreature.java
index 5bc62af195a7b11182d411296c978b4f6f5f837f..28a4ab7320fedfc372476f61091ab6e5efa6c805 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftCreature.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftCreature.java
@@ -2,6 +2,7 @@ package org.bukkit.craftbukkit.entity;
 
 import net.minecraft.world.entity.PathfinderMob;
 import org.bukkit.craftbukkit.CraftServer;
+import org.bukkit.entity.Allay;
 import org.bukkit.entity.Creature;
 
 public class CraftCreature extends CraftMob implements Creature {
@@ -18,4 +19,9 @@ public class CraftCreature extends CraftMob implements Creature {
     public String toString() {
         return "CraftCreature";
     }
+
+    @Override
+    public boolean isPanicking() {
+        return this.getHandle().isPanicking();
+    }
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftDrowned.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftDrowned.java
index 14b575254171f66b8792033c93cf5a325a42b467..1f2d76c5ec95cc4f2cb2826faf38b3532e0d4f82 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftDrowned.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftDrowned.java
@@ -18,4 +18,14 @@ public class CraftDrowned extends CraftZombie implements Drowned, com.destroysto
     public String toString() {
         return "CraftDrowned";
     }
+
+    @Override
+    public boolean isSearchingForLand() {
+        return this.getHandle().searchingForLand;
+    }
+
+    @Override
+    public void setSearchingForLand(boolean searching) {
+        this.getHandle().setSearchingForLand(searching);
+    }
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftElderGuardian.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftElderGuardian.java
index 0e5d7ba2a30b2110723b2a83ac08617d4de9a4ac..aa9b122a85aa644f0fdfac625ff7e087dd6c320d 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftElderGuardian.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftElderGuardian.java
@@ -18,4 +18,61 @@ public class CraftElderGuardian extends CraftGuardian implements ElderGuardian {
     public boolean isElder() {
         return true;
     }
+
+    @Override
+    public net.minecraft.world.entity.monster.ElderGuardian getHandle(){
+        return (net.minecraft.world.entity.monster.ElderGuardian) super.getHandle();
+    }
+
+    // Canvas start
+    @Override
+    public void setEffectAmplifier(final int effectAmplifier) {
+        this.getHandle().setEffectAmplifier(effectAmplifier);
+    }
+
+    @Override
+    public int getEffectDuration() {
+        return this.getHandle().getEffectDuration();
+    }
+
+    @Override
+    public void setEffectDuration(final int effectDuration) {
+        this.getHandle().setEffectDuration(effectDuration);
+    }
+
+    @Override
+    public int getEffectAmplifier() {
+        return this.getHandle().getEffectAmplifier();
+    }
+
+    @Override
+    public int getEffectDisplayLimit() {
+        return this.getHandle().getEffectDisplayLimit();
+    }
+
+    @Override
+    public void setEffectDisplayLimit(final int effectDisplayLimit) {
+        this.getHandle().setEffectDisplayLimit(effectDisplayLimit);
+    }
+
+    @Override
+    public int getEffectInterval() {
+        return this.getHandle().getEffectInterval();
+    }
+
+    @Override
+    public void setEffectInterval(final int effectInterval) {
+        this.getHandle().setEffectInterval(effectInterval);
+    }
+
+    @Override
+    public int getEffectRadius() {
+        return this.getHandle().getEffectRadius();
+    }
+
+    @Override
+    public void setEffectRadius(final int effectRadius) {
+        this.getHandle().setEffectRadius(effectRadius);
+    }
+    // Canvas end
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftEnderDragon.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftEnderDragon.java
index 492fdc855fe9735b614b6831aa5baaa6b252cfb6..d573c5f5aa828548faae555cb7d7d0b8e24dc05c 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftEnderDragon.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftEnderDragon.java
@@ -2,6 +2,8 @@ package org.bukkit.craftbukkit.entity;
 
 import com.google.common.collect.ImmutableSet;
 import com.google.common.collect.ImmutableSet.Builder;
+import java.util.ArrayList;
+import java.util.List;
 import java.util.Set;
 import net.minecraft.world.entity.boss.EnderDragonPart;
 import net.minecraft.world.entity.boss.enderdragon.phases.EnderDragonPhase;
@@ -12,6 +14,7 @@ import org.bukkit.craftbukkit.boss.CraftDragonBattle;
 import org.bukkit.entity.ComplexEntityPart;
 import org.bukkit.entity.EnderDragon;
 import org.bukkit.entity.EnderDragon.Phase;
+import org.bukkit.entity.Entity;
 
 public class CraftEnderDragon extends CraftMob implements EnderDragon, CraftEnemy {
 
@@ -64,9 +67,11 @@ public class CraftEnderDragon extends CraftMob implements EnderDragon, CraftEnem
         return battle != null ? battle.getBossBar() : null;
     }
 
+    DragonBattle dragonBattle = this.getHandle().getDragonFight() != null ? new CraftDragonBattle(this.getHandle().getDragonFight()) : null; // Canvas
+
     @Override
     public DragonBattle getDragonBattle() {
-        return this.getHandle().getDragonFight() != null ? new CraftDragonBattle(this.getHandle().getDragonFight()) : null;
+        return this.dragonBattle; // Canvas
     }
 
     @Override
@@ -90,5 +95,32 @@ public class CraftEnderDragon extends CraftMob implements EnderDragon, CraftEnem
             this.getHandle().setPodium(io.papermc.paper.util.MCUtil.toBlockPos(location));
         }
     }
-    // Paper end
+
+    // Canvas start
+    @Override
+    public void setDragonBattle(final DragonBattle dragonBattle) {
+        this.dragonBattle = dragonBattle;
+    }
+
+    @Override
+    public void knockback(final List<Entity> entities) {
+        List<net.minecraft.world.entity.Entity> entityList = new ArrayList<>();
+        for (Entity T : entities) {
+            entityList.add(((CraftEntity) T).getHandle());
+        }
+        this.getHandle().knockBack(entityList);
+    }
+
+    @Override
+    public void knockback(final Entity entity) {
+        List<net.minecraft.world.entity.Entity> entities = new ArrayList<>();
+        entities.add(((CraftEntity) entity).getHandle());
+        this.getHandle().knockBack(entities);
+    }
+
+    @Override
+    public boolean inWall() {
+        return this.getHandle().inWall;
+    }
+    // Paper end -/- Canvas end
 }
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftEnderman.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftEnderman.java
index 92eb829161079c4a96447698aee58cc6e7cbd29f..005f8f4071f2c88d660e7d180a4fe23fb8dc4cbc 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftEnderman.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftEnderman.java
@@ -3,6 +3,8 @@ package org.bukkit.craftbukkit.entity;
 import com.google.common.base.Preconditions;
 import net.minecraft.world.entity.monster.EnderMan;
 import net.minecraft.world.level.block.state.BlockState;
+import org.apache.commons.lang3.tuple.Pair;
+import org.bukkit.Location;
 import org.bukkit.Material;
 import org.bukkit.block.data.BlockData;
 import org.bukkit.craftbukkit.CraftServer;
@@ -10,6 +12,7 @@ import org.bukkit.craftbukkit.block.data.CraftBlockData;
 import org.bukkit.craftbukkit.util.CraftMagicNumbers;
 import org.bukkit.entity.Enderman;
 import org.bukkit.entity.Entity;
+import org.bukkit.entity.Player;
 import org.bukkit.material.MaterialData;
 
 public class CraftEnderman extends CraftMonster implements Enderman {
@@ -60,7 +63,53 @@ public class CraftEnderman extends CraftMonster implements Enderman {
     public void setHasBeenStaredAt(boolean hasBeenStaredAt) {
         this.getHandle().setHasBeenStaredAt(hasBeenStaredAt);
     }
-    // Paper end
+
+    // Canavs start
+    @Override
+    public void teleportTowards(final int x, final int y, final int z) {
+        Preconditions.checkArgument(new Location(this.getWorld(), x, y, z) != null, "location cannot be null");
+        this.getHandle().teleport(x, y, z);
+    }
+
+    @Override
+    public void setPersistentAngerTime(final int min, final int max) {
+        this.getHandle().setPersistentAngerTime(min, max);
+    }
+
+    @Override
+    public Pair<Integer, Integer> getPersistentAngerTime() {
+        int max = this.getHandle().maxRangeAnger;
+        int min = this.getHandle().minRangeAnger;
+        Pair<Integer, Integer> integerPair = new Pair<Integer, Integer>() {
+            @Override
+            @Deprecated(forRemoval = true)
+            public Integer setValue(final Integer value) {
+                return null;
+            }
+
+            @Override
+            public Integer getLeft() {
+                return min;
+            }
+
+            @Override
+            public Integer getRight() {
+                return max;
+            }
+        };
+        return integerPair;
+    }
+
+    @Override
+    public void playStareSound() {
+        this.getHandle().playStareSound();
+    }
+
+    @Override
+    public boolean isLookingAtMe(final Player player) {
+        return this.getHandle().isLookingAtMe_check(((CraftPlayer) player).getHandle());
+    }
+    // Paper end -/- Canvas end
 
     @Override
     public EnderMan getHandle() {
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftFireball.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftFireball.java
index 22d59ca52229dc566b8dfb460b92ecd6318e6db0..75c457ce8bf8ae142c92f359b4658e6c0868cdc0 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftFireball.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftFireball.java
@@ -1,7 +1,12 @@
 package org.bukkit.craftbukkit.entity;
 
 import com.google.common.base.Preconditions;
+import net.minecraft.core.particles.ParticleOptions;
+import net.minecraft.core.particles.ParticleType;
+import net.minecraft.core.particles.ParticleTypes;
 import net.minecraft.world.entity.projectile.AbstractHurtingProjectile;
+import org.bukkit.Particle;
+import org.bukkit.craftbukkit.CraftParticle;
 import org.bukkit.craftbukkit.CraftServer;
 import org.bukkit.entity.Fireball;
 import org.bukkit.projectiles.ProjectileSource;
@@ -39,6 +44,37 @@ public class CraftFireball extends AbstractProjectile implements Fireball {
         return new Vector(this.getHandle().xPower, this.getHandle().yPower, this.getHandle().zPower);
     }
 
+    @Override
+    public void setParticleTrailType(final Particle particle) {
+        ParticleOptions particleType = CraftParticle.toNMS(particle);
+        this.getHandle().setTrailParticle(particleType);
+    }
+
+    @Override
+    public Particle getParticleTrailType() {
+        return CraftParticle.minecraftToBukkit(this.getHandle().getTrailParticle().getType());
+    }
+
+    @Override
+    public void setShouldBurn(final boolean should) {
+        this.getHandle().setShouldBurn(should);
+    }
+
+    @Override
+    public boolean shouldBurn() {
+        return this.getHandle().shouldBurn();
+    }
+
+    @Override
+    public void setInertia(final float inertia) {
+        this.getHandle().setInertia(inertia);
+    }
+
+    @Override
+    public float getInertia() {
+        return this.getHandle().getInertia();
+    }
+
     @Override
     public void setDirection(Vector direction) {
         Preconditions.checkArgument(direction != null, "Vector direction cannot be null");
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftMob.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftMob.java
index 153e4c88c168097eb4a78650e7c9c120bec202a3..e2d2f3f0ae370890484c1a136ebb72123a2bcf07 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftMob.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftMob.java
@@ -10,6 +10,7 @@ import org.bukkit.craftbukkit.CraftSound;
 import org.bukkit.craftbukkit.util.CraftNamespacedKey;
 import org.bukkit.entity.LivingEntity;
 import org.bukkit.entity.Mob;
+import org.bukkit.entity.Player;
 import org.bukkit.loot.LootTable;
 
 public abstract class CraftMob extends CraftLivingEntity implements Mob {
@@ -32,6 +33,11 @@ public abstract class CraftMob extends CraftLivingEntity implements Mob {
         }
     }
 
+    @Override
+    public boolean canBeLeashed(Player player){
+        return this.getHandle().canBeLeashed(((CraftPlayer) player).getHandle());
+    }
+
     @Override
     public CraftLivingEntity getTarget() {
         if (this.getHandle().getTarget() == null) return null;
diff --git a/src/main/java/org/bukkit/craftbukkit/scheduler/MinecraftInternalPlugin.java b/src/main/java/org/bukkit/craftbukkit/scheduler/MinecraftInternalPlugin.java
index d96399e9bf1a58db5a4a22e58abb99e7660e0694..86a67cdeb6421c469c3bb9b22aded8c44eb11ddd 100644
--- a/src/main/java/org/bukkit/craftbukkit/scheduler/MinecraftInternalPlugin.java
+++ b/src/main/java/org/bukkit/craftbukkit/scheduler/MinecraftInternalPlugin.java
@@ -1,16 +1,23 @@
 package org.bukkit.craftbukkit.scheduler;
 
 
+import org.bukkit.Bukkit;
 import org.bukkit.Server;
 import org.bukkit.command.Command;
 import org.bukkit.command.CommandSender;
 import org.bukkit.configuration.file.FileConfiguration;
+import org.bukkit.entity.Camel;
+import org.bukkit.entity.EntityType;
+import org.bukkit.event.EventHandler;
+import org.bukkit.event.Listener;
+import org.bukkit.event.player.PlayerJoinEvent;
 import org.bukkit.generator.BiomeProvider;
 import org.bukkit.generator.ChunkGenerator;
 import org.bukkit.plugin.PluginBase;
 import org.bukkit.plugin.PluginDescriptionFile;
 import org.bukkit.plugin.PluginLoader;
 import org.bukkit.plugin.PluginLogger;
+import org.bukkit.scheduler.BukkitRunnable;
 import org.jetbrains.annotations.NotNull;
 import org.jetbrains.annotations.Nullable;
 
@@ -18,7 +25,7 @@ import java.io.File;
 import java.io.InputStream;
 import java.util.List;
 
-public class MinecraftInternalPlugin extends PluginBase {
+public class MinecraftInternalPlugin extends PluginBase implements Listener {
     private boolean enabled = true;
 
     private final String pluginName;
@@ -143,4 +150,9 @@ public class MinecraftInternalPlugin extends PluginBase {
     public List<String> onTabComplete(CommandSender sender, Command command, String alias, String[] args) {
         throw new UnsupportedOperationException("Not supported.");
     }
+
+    @EventHandler
+    public void test(PlayerJoinEvent e){
+        // yeah just testing bro
+    }
 }
