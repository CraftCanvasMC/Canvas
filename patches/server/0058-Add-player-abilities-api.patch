From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Dueris MC <purplewolf.mc1@gmail.com>
Date: Wed, 15 Nov 2023 21:03:11 +0000
Subject: [PATCH] Add player abilities api


diff --git a/src/main/java/me/dueris/canvas/entity/player/Abilities.java b/src/main/java/me/dueris/canvas/entity/player/Abilities.java
new file mode 100644
index 0000000000000000000000000000000000000000..94db03b56a13df55c197c0d3a5144b3109862164
--- /dev/null
+++ b/src/main/java/me/dueris/canvas/entity/player/Abilities.java
@@ -0,0 +1,62 @@
+package me.dueris.canvas.entity.player;
+
+import org.bukkit.craftbukkit.entity.CraftPlayer;
+
+public class Abilities implements me.dueris.canvas.entity.Abilities {
+    private CraftPlayer player;
+
+    public Abilities(CraftPlayer player){
+        this.player = player;
+    }
+
+    @Override
+    public boolean invulnerable(){
+        return this.player.getHandle().getAbilities().invulnerable;
+    }
+    // NOTE FOR LATER: add ability to set some of these values, like "maybuild", "instabuild"
+
+    @Override
+    public boolean flying(){
+        return this.player.getHandle().getAbilities().flying;
+    }
+
+    @Override
+    public boolean maybuild(){
+        return this.player.getHandle().getAbilities().mayBuild;
+    }
+
+    @Override
+    public boolean mayFly(){
+        return this.player.getHandle().getAbilities().mayfly;
+    }
+
+    @Override
+    public boolean instabuild(){
+        return this.player.getHandle().getAbilities().instabuild;
+    }
+
+    @Override
+    public float getFlyingSpeed(){
+        return this.player.getHandle().getAbilities().flyingSpeed;
+    }
+
+    @Override
+    public void setFlyingSpeed(float speed){
+        this.player.getHandle().getAbilities().setFlyingSpeed(speed);
+    }
+
+    @Override
+    public float getWalkingSpeed(){
+        return this.player.getHandle().getAbilities().walkingSpeed;
+    }
+
+    @Override
+    public void setWalkingSpeed(float speed){
+        this.player.getHandle().getAbilities().setWalkingSpeed(speed);
+    }
+
+    @Override
+    public org.bukkit.entity.Player getPlayer(){
+        return this.player;
+    }
+}
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index 8a30d89c275ae63dab2bcae539692bb3e2ad5dd7..c9f01bef75d5ab8a94e95feee1b7dafab8e29363 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -415,6 +415,13 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
 
          updatePlayerListHeaderFooter();
     }
+    // Canvas start
+
+    @Override
+    public me.dueris.canvas.entity.player.Abilities getAbilities(){
+        return new me.dueris.canvas.entity.player.Abilities(this);
+    }
+    // Canvas end
 
     @Override
     public void setPlayerListHeaderFooter(BaseComponent header, BaseComponent footer) {
